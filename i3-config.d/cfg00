# -*- Mode: Shell-script -*-
#
# ETCMODE BINDINGS BEGIN HERE.
#


mode "kill - space to cancel" {

    bindsym q $default, kill;
    bindsym w [floating] $default, kill;
    bindsym space $default
}

mode "layouts"  {
    bindsym d layout default
    bindsym s layout stacking
    bindsym t layout tabbed
    bindsym f layout toggle split

    bindsym h $default, focus down, split h, focus up, move down, move left;
    bindsym v $default, focus right, split v, focus left, move right, move up ;

    bindsym q $default, kill;
    bindsym w [floating] $default, kill;
    bindsym space $default
}

mode "f_ocus - m_ove r_esize" {
    bindsym h focus left
    bindsym j focus down
    bindsym k focus up
    bindsym l focus right

    bindsym a focus parent # adult
    bindsym s focus child  # son
    bindsym d focus child  # daughter

    bindsym u $default, [urgent=latest] focus

    bindsym m mode "m_ove - r_esize f_ocus"
    bindsym r mode "r_esize - f_ocus m_ove"

    bindsym grave mode "etcmode"
    bindcode   51 mode "etcmode"
    bindsym space $default
}

mode "m_ove - r_esize f_ocus" {
    bindsym h move left
    bindsym j move down
    bindsym k move up
    bindsym l move right

    bindsym f mode "f_ocus - m_ove r_esize"
    bindsym r mode "r_esize - f_ocus m_ove"

    bindsym grave mode "etcmode"
    bindcode   51 mode "etcmode"
    bindsym space $default
}

mode "r_esize - f_ocus m_ove" {
    bindsym h resize shrink width 10 px or 10 ppt
    bindsym j resize grow height 10 px or 10 ppt
    bindsym k resize shrink height 10 px or 10 ppt
    bindsym l resize grow width 10 px or 10 ppt

    bindsym f mode "f_ocus - m_ove r_esize"
    bindsym m mode "m_ove - r_esize f_ocus"

    bindsym grave mode "etcmode"
    bindcode   51 mode "etcmode"
    bindsym space $default
}

mode "workspace" {
    bindsym h workspace prev
    bindsym j workspace prev_on_output
    bindsym k workspace next_on_output
    bindsym l workspace next

    bindsym z $default, move workspace to output $lmon
    bindsym x $default, move workspace to output $cmon
    bindsym c $default, move workspace to output $rmon

    bindsym w mode "move_workspace"

    bindsym 1 mode ws1
    bindsym 2 mode ws2
    bindsym 3 mode ws3
    bindsym 4 mode ws4
    bindsym 5 mode ws5
    bindsym 6 mode ws6
    bindsym 7 mode ws7
    bindsym 8 mode ws8
    bindsym 9 mode ws9

    # (R)ename a workspace.
    bindsym r $default, exec --no-startup-id i3-input -f $i3inputfont -l 2 \
            -P '(rename this workspace to): ' \
            -F 'rename workspace to "%s"'

    # Move [f]ocused (thing:container,window) to a workspace.
    bindsym f $default, exec --no-startup-id i3-input -f $i3inputfont -l 2 \
            -P '(move focused to workspace): ' \
            -F 'move focused to workspace "%s"'

    # (V)isit a workspace. If the workspace does not exist beforehand
    # it is created, if it already exists, it is focused.
    bindsym v $default, exec --no-startup-id i3-input -f $i3inputfont -l 2 \
         -P '(workspace): ' -F 'workspace "%s"'

    bindsym grave mode "etcmode"
    bindcode   51 mode "etcmode"
    bindsym space $default
}

mode "move workspace" {
    bindsym 0 mode cws0
    bindsym 1 mode cws1
    bindsym 2 mode cws2
    bindsym 3 mode cws3
    bindsym 4 mode cws4
    bindsym 5 mode cws5
    bindsym 6 mode cws6
    bindsym 7 mode cws7
    bindsym 8 mode cws8
    bindsym 9 mode cws9

    bindsym grave mode "etcmode"
    bindcode   51 mode "etcmode"
    bindsym space $default
}

mode "screen" {
    bindsym f floating disable, toggle fullscreen;
    bindsym g floating disable, toggle fullscreen global;

    bindsym --release b $default, \
            exec --no-startup-id xset dpms force off;

    bindsym grave mode "etcmode"
    bindcode   51 mode "etcmode"
    bindsym space $default
}

# xfce4 is a popular DE amongst i3 users.
set $etcterminal exec --no-startup-id /usr/bin/xfce4-terminal; -T $etctitlebar
set $etctitlebar "xfce4-terminal"
set $etcpanel exec --no-startup-id xfce4-panel --disable-wm-check;
set $noetcpanel exec /usr/bin/killall xfce4-panel

mode "etcmode" {

    bindsym t $default, split h, $etcterminal;
    bindsym y $default, split v, $etcterminal;
    bindsym p $default, $etcpanel
    bindsym o $default, $noetcpanel

    bindsym q $default, mode "kill - space to cancel";
    bindsym a $default, [floating] mode "kill - space to cancel";

    bindsym d $default, exec dmenu_run

    bindsym b $default, split h
    bindsym v $default, split v

    bindsym comma $default, \
            floating enable, resize set 30 ppt 30 ppt, move position center;
    bindsym period $default, \
            floating enable, resize set 60 ppt 60 ppt, move position center;
    bindsym slash $default, floating toggle;

    bindsym f mode "f_ocus - m_ove r_esize"
    bindsym m mode "m_ove - r_esize f_ocus"
    bindsym r mode "r_esize - f_ocus m_ove"

    bindsym l mode "layouts"
    bindsym s mode "screen"
    bindsym w mode "workspace"

    # Press once to visit the mode, press again to self-insert once.
    bindsym grave $default, exec xdotool key grave;
    bindcode   51 $default, exec xdotool key backslash;
    # For consistency over efficiency.
    bindsym space $default
}
# On a PC105 keyboard the accent grave key is to the left of the '1'
# key and the key with code 51 is to the left of the Return key and
# just above the shift key on the right.
bindsym grave mode "etcmode"
bindcode   51 mode "etcmode"



#
# ETCMODE BINDINGS END HERE.
#
