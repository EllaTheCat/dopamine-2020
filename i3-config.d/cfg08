# -*- Mode: Shell-script -*-

#
# EXECUTABLE SETTINGS BEGIN HERE.
#

# Microphones' defaults (see key bindings). 1 = mute here.
exec --no-startup-id pactl set-source-mute $usbaudiosource 1
exec --no-startup-id pactl set-source-mute $analogaudiosource 1
exec --no-startup-id pactl set-source-mute $webcamaudiosource 1

# My machine has HDMI driving DVI on the monitor so I use analogue
# audio from any green 3.5 mm jack located on either the rear of the
# PC or a USB audio dongle. 2022-06-09: USB.
exec --no-startup-id pactl set-default-sink $usbaudiosink

# My "xubuntu fix broken bluetooth" incantation.
# Authenticated automatically by '/etc/sudoers.d/shevek'.
# Do not use dunst if you use this.
# The Bluetooth icon should appear in xfce4-panel.
exec --no-startup-id sudo systemctl restart bluetooth
exec --no-startup-id sudo modprobe btusb

# The volume on the 3.5mm analog jack occasionally assumes a value
# much higher than 100% during startup, prevent speaker damage.
exec --no-startup-id pactl set-sink-volume $analogaudiosink 70%

# EllaTheCat's inotify method for remote launching as local.
$etcfilewatcher

# These are i3wm variables, not bash variables.
set $dir "/dev/shm/${USER}/i3"
set $file "command"

# We should be able to focus or launch from i3 config (or a bash
# script) as we already do via the command prompt.
#
# These are the last commands to execute. They are invoked and are
# waiting to execute, meanwhile the remaining commands and scripts of
# 'i3-config' are invoked and executed. At startup the user sees the
# 'wm' workspace of 'i3-config-scripts appear, and after a modest
# delay, the workspaces specified below appear relatively quickly.
exec --no-startup-id sleep 19s && echo 'tm' > $dir/$file
exec --no-startup-id sleep 20s && echo 'tv' > $dir/$file
exec --no-startup-id sleep 23s && echo 'mx' > $dir/$file
exec --no-startup-id sleep 25s && echo 'ds' > $dir/$file
exec --no-startup-id sleep 27s && echo 'f0' > $dir/$file
exec --no-startup-id sleep 30s && echo 'g9' > $dir/$file
exec --no-startup-id sleep 33s && echo 'e0' > $dir/$file

#
# EXECUTABLE SETTINGS END HERE.
#
