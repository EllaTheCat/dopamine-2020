# -*- Mode: Shell-script -*-

#
# EXECUTABLE SETTINGS BEGIN HERE.
#


# Under evaluation: Bind bookmark-clicks to workspaces.
#
# The router and the access point share a workspace.
for_window [title="Plusnet Hub Manager"] \
           move container to workspace ip, workspace --no-auto-back-and-forth ip;
for_window [title="TL-WR710N"] \
           move container to workspace ip, workspace --no-auto-back-and-forth ip;
for_window [title="WhatsApp"] \
           move container to workspace wa, workspace --no-auto-back-and-forth wa;

# Microphones' defaults (see key bindings). 1 = mute here.
exec --no-startup-id pactl set-source-mute $usbaudiosource 1
exec --no-startup-id pactl set-source-mute $analogaudiosource 1
exec --no-startup-id pactl set-source-mute $webcamaudiosource 1

# My machine has HDMI driving DVI on the monitor so I use analogue
# audio from the green 3.5 mm jack.
exec --no-startup-id pactl set-default-sink $analogaudiosink

# Spindown at startup by default. Explicit PATH required here.
exec --no-startup-id $HOME/local/bin/my-usb-disks configure banana
exec --no-startup-id $HOME/local/bin/my-usb-disks  spindown banana

# My "xubuntu fix broken bluetooth" incantation.
# Authenticated automatically by '/etc/sudoers.d/shevek'.
# Do not use dunst if you use this.
# The Bluetooth icon should appear in xfce4-panel.
exec --no-startup-id sudo systemctl restart bluetooth
exec --no-startup-id sudo modprobe btusb

# The volume on the 3.5mm analog jack occasionally assumes a value
# much higher than 100% during startup, prevent speaker damage.
exec --no-startup-id pactl set-sink-volume $analogaudiosink 70%

# These are i3wm variables, not bash variables.
set $dir "/dev/shm/${USER}/i3"
set $file "command"

# We should be able to focus or launch from i3 config (or a bash
# script) as we already do via the command prompt.
#
# These are the last commands to execute. They are invoked and are
# waiting to execute, meanwhile the remaining commands and scripts of
# 'i3-config' are invoked and executed. At startup the user sees the
# 'wm' workspace of 'i3-config-scripts appear, and after a modest
# delay, the workspaces specified below appear relatively quickly.e
exec --no-startup-id sleep 21s && echo 'tv' > $dir/$file
exec --no-startup-id sleep 23s && echo 'tt' > $dir/$file
exec --no-startup-id sleep 24s && echo 'f0' > $dir/$file
exec --no-startup-id sleep 27s && echo 'g0' > $dir/$file
exec --no-startup-id sleep 30s && echo 'ns' > $dir/$file
exec --no-startup-id sleep 33s && echo 'ds' > $dir/$file
exec --no-startup-id sleep 36s && echo 'e0' > $dir/$file

#
# EXECUTABLE SETTINGS END HERE.
#
